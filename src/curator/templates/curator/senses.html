<svg id="svg{{translation.safe_id}}-{{token}}"></svg>

<div id="test1-{{translation.safe_id}}">
</div>
<div id ="test{{translation.safe_id}}-{{token}}">
    You should not be seeing this.
</div>
<!-- {{translation.hypernyms}} -->
<script type="text/javascript">
 var width = 800;
 var height = 800;
 var color = d3.scaleOrdinal(d3.schemeCategory10);
 $('a[href="#menu2-{{translation.safe_id}}"]').on('hidden.bs.tab',function(e){
     console.log("hide");
     var svg = d3.select("#svg{{translation.safe_id}}").attr("width", width).attr("height", height);
     svg.selectAll("*").remove();
 });

 $('a[href="#menu2-{{translation.safe_id}}-{{token}}"]').on('shown.bs.tab',function(e){
     console.log("show");
     var word = d3.select('a[href="#menu2-{{translation.safe_id}}"]')
     console.log("Graph....");
     d3.json("/curator/segments/{{page_obj.number}}/wordsense/{{token}}").then(data =>{
         console.log(data);
         d3.select("#test{{translation.safe_id}}-{{token}}").text("");
         var margin = {top: 20, right: 90, bottom: 30, left: 90},
             width = 1600 - margin.left - margin.right,
             height = 960 - margin.top - margin.bottom;


         var svg = d3.select("#svg{{translation.safe_id}}-{{token}}").attr("width", width).attr("height", height)
                     .append("g")
                     .attr("transform", "translate("
                                      + margin.left + "," + margin.top + ")");


         //To prevent adding multiple graphs whenever ths sense is clicked
         svg.selectAll("*").remove();
         var i = 0,
             duration = d3.event && d3.event.altKey ? 2500 : 250,
             root;




     }).catch(function(error) {
         // Do some error handling.
     });
     console.log("Done.");
 });


</script>
